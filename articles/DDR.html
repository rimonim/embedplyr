<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Distributed Dictionary Representation (DDR) • embedplyr</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Distributed Dictionary Representation (DDR)">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">embedplyr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/DDR.html">Distributed Dictionary Representation (DDR)</a></li>
    <li><a class="dropdown-item" href="../articles/performance.html">Performance Benchmark</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Distributed Dictionary Representation (DDR)</h1>
            
      

      <div class="d-none name"><code>DDR.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://rimonim.github.io/embedplyr/">embedplyr</a></span><span class="op">)</span></span></code></pre></div>
<p>Psychology researchers have been constructing, validating, and
publicizing dictionaries (lists of words associated with a given
construct) for decades. But these dictionaries are designed for word
counting—How do we apply them to a embedding-based analysis? Garten et
al. (2018) propose a simple solution: Get word embeddings for each word
in the dictionary, and average them together to create a single
Distributed Dictionary Representation (DDR). The dictionary construct
can then be measured by comparing text embeddings to the DDR.</p>
<p>DDR is ideal for studies of abstract constructs like emotions, that
refer to the general gist of a text rather than particular words. The
rich representation of word embeddings allows DDR to capture even the
subtlest associations between words and constructs, and to precisely
reflect the <em>extent</em> to which each word is associated with each
construct. It can do this even for texts that do not contain any
dictionary words. Because embeddings are continuous and already
calibrated to the probabilities of word use in language, DDR also avoids
the difficult statistical problems that arise due to the strange
distributions of word counts (see <a href="https://ds4psych.com/word-counting-improvements" class="external-link">DS4Psych, Chapter
16</a>).</p>
<div class="section level3">
<h3 id="load-word-embedding-model">Load Word Embedding Model<a class="anchor" aria-label="anchor" href="#load-word-embedding-model"></a>
</h3>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">glove_twitter_25d</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/load_embeddings.html">load_embeddings</a></span><span class="op">(</span><span class="st">"glove.twitter.27B.25d"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="embed-texts-of-interest">Embed Texts of Interest<a class="anchor" aria-label="anchor" href="#embed-texts-of-interest"></a>
</h3>
<p>We have three example texts, which we can imagine were written by a
participant diagnosed with depression, one diagnosed with anxiety, and
one control. We will analyze to what extent these texts reflect high vs
low anxiety.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">psych_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tribble.html" class="external-link">tribble</a></span><span class="op">(</span></span>
<span>    <span class="op">~</span><span class="va">id</span>,           <span class="op">~</span><span class="va">text</span>,</span>
<span>    <span class="st">"control"</span>,     <span class="st">"yesterday I took my dog for a walk"</span>,</span>
<span>    <span class="st">"depression"</span>,  <span class="st">"I slept all day and cried in the evening"</span>,</span>
<span>    <span class="st">"anxiety"</span>,     <span class="st">"I just kept thinking of all the things I needed to do"</span></span>
<span>    <span class="op">)</span></span>
<span></span>
<span><span class="va">psych_embeddings_df</span> <span class="op">&lt;-</span> <span class="va">psych_df</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu"><a href="../reference/embed_docs.html">embed_docs</a></span><span class="op">(</span><span class="st">"text"</span>, <span class="va">glove_twitter_25d</span>, id_col <span class="op">=</span> <span class="st">"id"</span>, .keep_all <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning in predict.embeddings(model, feats, .keep_missing = TRUE): 1 items in</span></span>
<span><span class="co">#&gt; `newdata` are not present in the embeddings object.</span></span>
<span></span>
<span><span class="va">psych_embeddings_df</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 3 × 27</span></span></span>
<span><span class="co">#&gt;   id        text    dim_1 dim_2 dim_3   dim_4  dim_5   dim_6 dim_7  dim_8  dim_9</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> control   yest… -<span style="color: #BB0000;">0.597</span>  0.381 0.564  0.037<span style="text-decoration: underline;">2</span> -<span style="color: #BB0000;">0.198</span> -<span style="color: #BB0000;">0.143</span>   1.11 -<span style="color: #BB0000;">0.121</span> -<span style="color: #BB0000;">0.290</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> depressi… I sl… -<span style="color: #BB0000;">0.547</span>  0.195 0.472 -<span style="color: #BB0000;">0.201</span>  -<span style="color: #BB0000;">0.372</span> -<span style="color: #BB0000;">0.184</span>   1.32 -<span style="color: #BB0000;">0.270</span> -<span style="color: #BB0000;">0.409</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> anxiety   I ju… -<span style="color: #BB0000;">0.035</span><span style="color: #BB0000; text-decoration: underline;">8</span> 0.482 0.319 -<span style="color: #BB0000;">0.105</span>  -<span style="color: #BB0000;">0.300</span> -<span style="color: #BB0000;">0.024</span><span style="color: #BB0000; text-decoration: underline;">9</span>  1.32 -<span style="color: #BB0000;">0.471</span> -<span style="color: #BB0000;">0.246</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 16 more variables: dim_10 &lt;dbl&gt;, dim_11 &lt;dbl&gt;, dim_12 &lt;dbl&gt;, dim_13 &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   dim_14 &lt;dbl&gt;, dim_15 &lt;dbl&gt;, dim_16 &lt;dbl&gt;, dim_17 &lt;dbl&gt;, dim_18 &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   dim_19 &lt;dbl&gt;, dim_20 &lt;dbl&gt;, dim_21 &lt;dbl&gt;, dim_22 &lt;dbl&gt;, dim_23 &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   dim_24 &lt;dbl&gt;, dim_25 &lt;dbl&gt;</span></span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="load-and-embed-dictionaries">Load and Embed Dictionaries<a class="anchor" aria-label="anchor" href="#load-and-embed-dictionaries"></a>
</h3>
<p>Many quality dictionaries are available from <a href="https://github.com/quanteda/quanteda.sentiment" class="external-link">quanteda.sentiment</a>
and other sources (see <a href="https://ds4psych.com/word-counting#sec-dictionary-sources" class="external-link">DS4Psych,
Chapter 14</a>). For the sake of this example, we will use made-up
dictionaries.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># positive and negative construct dictionaries</span></span>
<span><span class="va">high_anx_dict</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"anxious"</span>, <span class="st">"overwhelmed"</span>, <span class="st">"exhausted"</span>, <span class="st">"nervous"</span>, <span class="st">"stressed"</span><span class="op">)</span></span>
<span><span class="va">low_anx_dict</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"relaxed"</span>, <span class="st">"calm"</span>, <span class="st">"mellow"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># embed dictionaries</span></span>
<span><span class="va">high_anx_dict_embeddings</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict</a></span><span class="op">(</span><span class="va">glove_twitter_25d</span>, <span class="va">high_anx_dict</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning in predict.embeddings(glove_twitter_25d, high_anx_dict): 3 items in</span></span>
<span><span class="co">#&gt; `newdata` are not present in the embeddings object.</span></span>
<span><span class="va">low_anx_dict_embeddings</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict</a></span><span class="op">(</span><span class="va">glove_twitter_25d</span>, <span class="va">low_anx_dict</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning in predict.embeddings(glove_twitter_25d, low_anx_dict): 1 items in</span></span>
<span><span class="co">#&gt; `newdata` are not present in the embeddings object.</span></span>
<span></span>
<span><span class="co"># average embeddings to create DDR</span></span>
<span><span class="va">high_anx_DDR</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/average_embedding.html">average_embedding</a></span><span class="op">(</span><span class="va">high_anx_dict_embeddings</span><span class="op">)</span></span>
<span><span class="va">low_anx_DDR</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/average_embedding.html">average_embedding</a></span><span class="op">(</span><span class="va">low_anx_dict_embeddings</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="calculate-similarity-metrics">Calculate Similarity Metrics<a class="anchor" aria-label="anchor" href="#calculate-similarity-metrics"></a>
</h3>
<p>To complete the process, we compare the embeddings of each of our
texts to that of the DDR. This could be done by computing cosine
similarity between each text and <code>high_anx_DDR</code>. But since we
want to know the extent to which these texts reflect high anxiety <em>as
opposed to low anxiety</em>, we will use an anchored vector. This
approach is also known as semantic projection (Grand et al., 2022).</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">anxiety_scores_df</span> <span class="op">&lt;-</span> <span class="va">psych_embeddings_df</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/get_sims.html">get_sims</a></span><span class="op">(</span></span>
<span>    <span class="va">dim_1</span><span class="op">:</span><span class="va">dim_25</span>, </span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>anxiety <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>pos <span class="op">=</span> <span class="va">high_anx_DDR</span>, neg <span class="op">=</span> <span class="va">low_anx_DDR</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    method <span class="op">=</span> <span class="st">"anchored"</span></span>
<span>    <span class="op">)</span></span>
<span><span class="va">anxiety_scores_df</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 3 × 3</span></span></span>
<span><span class="co">#&gt;   id         text                                                  anxiety</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                                                   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> control    yesterday I took my dog for a walk                      0.127</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> depression I slept all day and cried in the evening                0.162</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> anxiety    I just kept thinking of all the things I needed to do   0.272</span></span></code></pre></div>
<p>It seems that both the depression and anxiety texts reflect quite a
bit more anxiety than the control.</p>
</div>
<div class="section level3">
<h3 id="weighted-ddr">Weighted DDR<a class="anchor" aria-label="anchor" href="#weighted-ddr"></a>
</h3>
<p>Garten et al. (2018) found that DDR works best with smaller
dictionaries of only the words most directly connected to the construct
being measured (around 30 words worked best in their experiments). Word
embeddings work by overvaluing informative words (see <a href="https://ds4psych.com/decontextualized-embeddings#sec-embedding-magnitude" class="external-link">DS4Psych,
Chapter 18</a>)—a desirable property for raw texts, in which
uninformative words tend to be very frequent. But dictionaries only
include one of each word. In longer dictionaries with more infrequent,
tangentially connected words, averaging word embeddings will therefore
<em>overvalue</em> those infrequent words and skew the DDR. This can be
fixed with Garten et al.’s method of picking out only the most
informative words. Alternatively, it could be fixed by measuring the
frequency of each dictionary word in a corpus and weighting the average
embedding by that frequency. This method is consistent with the way most
dictionaries are validated, by counting the frequencies of dictionary
words in text (see <a href="https://ds4psych.com/word-counting" class="external-link">DS4Psych, Chapter 14</a>).</p>
<p>In the absence of reliable frequency data from our own corpus (or
from the corpus on which the dictionaries were validated), we can set
<code>w = "trillion_word"</code> to weight words by their frequencies in
the Google Trillion Word corpus.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># weighted averages</span></span>
<span><span class="va">high_anx_DDR_w</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/average_embedding.html">average_embedding</a></span><span class="op">(</span><span class="va">high_anx_dict_embeddings</span>, w <span class="op">=</span> <span class="st">"trillion_word"</span><span class="op">)</span></span>
<span><span class="va">low_anx_DDR_w</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/average_embedding.html">average_embedding</a></span><span class="op">(</span><span class="va">low_anx_dict_embeddings</span>, w <span class="op">=</span> <span class="st">"trillion_word"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># calculate similarity scores</span></span>
<span><span class="va">anxiety_scores_df</span> <span class="op">&lt;-</span> <span class="va">psych_embeddings_df</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/get_sims.html">get_sims</a></span><span class="op">(</span></span>
<span>    <span class="va">dim_1</span><span class="op">:</span><span class="va">dim_25</span>, </span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>anxiety <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>pos <span class="op">=</span> <span class="va">high_anx_DDR_w</span>, neg <span class="op">=</span> <span class="va">low_anx_DDR_w</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    method <span class="op">=</span> <span class="st">"anchored"</span></span>
<span>    <span class="op">)</span></span>
<span><span class="va">anxiety_scores_df</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 3 × 3</span></span></span>
<span><span class="co">#&gt;   id         text                                                  anxiety</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                                                   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> control    yesterday I took my dog for a walk                     0.011<span style="text-decoration: underline;">0</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> depression I slept all day and cried in the evening               0.090<span style="text-decoration: underline;">9</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> anxiety    I just kept thinking of all the things I needed to do  0.123</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<p>Garten, J., Hoover, J., Johnson, K. M., Boghrati, R., Iskiwitch, C.,
&amp; Dehghani, M. (2018). <a href="https://doi.org/10.3758/s13428-017-0875-9" class="external-link">Dictionaries and
distributions: Combining expert knowledge and large scale textual data
content analysis: Distributed dictionary representation</a>.
<em>Behavior Research Methods, 50</em>, 344–361.</p>
<p>Grand, G., Blank, I. A., Pereira, F., &amp; Fedorenko, E. (2022). <a href="https://doi.org/10.1038/s41562-022-01316-8" class="external-link">Semantic projection
recovers rich human knowledge of multiple object features from word
embeddings</a>. <em>Nature Human Behaviour, 6</em>(7), 975–987.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Louis Teitelbaum.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
