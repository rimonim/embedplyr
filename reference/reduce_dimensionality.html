<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Reduce the Dimensionality of Embeddings — reduce_dimensionality • embedplyr</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Reduce the Dimensionality of Embeddings — reduce_dimensionality"><meta name="description" content="Includes methods for dataframes (in the style of dplyr), embeddings objects, and matrices."><meta property="og:description" content="Includes methods for dataframes (in the style of dplyr), embeddings objects, and matrices."><meta property="og:image" content="https://rimonim.github.io/embedplyr/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">embedplyr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/DDR.html">Distributed Dictionary Representation (DDR)</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Reduce the Dimensionality of Embeddings</h1>

      <div class="d-none name"><code>reduce_dimensionality.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Includes methods for dataframes (in the style of <code>dplyr</code>), embeddings objects, and matrices.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">reduce_dimensionality</span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'data.frame'</span></span>
<span><span class="fu">reduce_dimensionality</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  <span class="va">cols</span>,</span>
<span>  reduce_to <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  center <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  scale <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  tol <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  custom_rotation <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  output_rotation <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'embeddings'</span></span>
<span><span class="fu">reduce_dimensionality</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  reduce_to <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  center <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  scale <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  tol <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  custom_rotation <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  output_rotation <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>an <a href="embeddings.html">embeddings</a> object or dataframe with one embedding per row, or a
list of such objects</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>additional parameters to be passed to class-specific methods</p></dd>


<dt id="arg-cols">cols<a class="anchor" aria-label="anchor" href="#arg-cols"></a></dt>
<dd><p>tidyselect - columns that contain numeric embedding values</p></dd>


<dt id="arg-reduce-to">reduce_to<a class="anchor" aria-label="anchor" href="#arg-reduce-to"></a></dt>
<dd><p>number of dimensions to keep.
The value is passed to <code><a href="https://rdrr.io/r/stats/prcomp.html" class="external-link">stats::prcomp()</a></code> as <code>rank.</code>.</p></dd>


<dt id="arg-center">center<a class="anchor" aria-label="anchor" href="#arg-center"></a></dt>
<dd><p>logical. Should dimensions be shifted to be centered at zero?</p></dd>


<dt id="arg-scale">scale<a class="anchor" aria-label="anchor" href="#arg-scale"></a></dt>
<dd><p>logical. Should dimensions be scaled to have unit variance?</p></dd>


<dt id="arg-tol">tol<a class="anchor" aria-label="anchor" href="#arg-tol"></a></dt>
<dd><p>a value indicating a magnitude below which dimensions should be
omitted. (Components are omitted if their standard deviations are less than
or equal to tol times the standard deviation of the first component.) Value
passed to <code><a href="https://rdrr.io/r/stats/prcomp.html" class="external-link">stats::prcomp()</a></code>.</p></dd>


<dt id="arg-custom-rotation">custom_rotation<a class="anchor" aria-label="anchor" href="#arg-custom-rotation"></a></dt>
<dd><p>optional rotation specification obtained by calling the
function with <code>output_rotation = TRUE</code>. This will override <code>reduce_to</code>,
<code>center</code>, and <code>scale</code>, and instead simply apply the custom rotation.</p></dd>


<dt id="arg-output-rotation">output_rotation<a class="anchor" aria-label="anchor" href="#arg-output-rotation"></a></dt>
<dd><p><code>TRUE</code> outputs a rotation specification that can be
applied to other embeddings</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>By default, <code>reduce_dimensionality()</code>, performs principle components analysis
(PCA) without column normalization, and outputs the rotated data. If <code>center = FALSE</code>
and <code>scale = FALSE</code>, this is equivalent to singular value decomposition (SVD),
\(X = U \Sigma V^{T}\), where the output columns are equal to the first
<code>reduce_to</code> columns of \(U \Sigma\) that meet the criterion set by <code>tol</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>


<p>If <code>output_rotation = FALSE</code>, an object of the same class as x, with the same
number of rows but fewer columns. Reduced columns in the output will be named
"PC1", "PC2", etc.</p>
<p>If <code>output_rotation = TRUE</code>, a list with the following components:</p><ul><li><p><code>rotation</code>: a rotation matrix</p></li>
<li><p><code>center</code>: a vector describing how much to offset each dimension to
match the centering of <code>x</code></p></li>
<li><p><code>scale</code>: a vector with the standard deviation of each column of <code>x</code></p></li>
</ul><p>If <code>x</code> is a list, the function will be called recursively and output a list
of the same length.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">glove_2d</span> <span class="op">&lt;-</span> <span class="fu">reduce_dimensionality</span><span class="op">(</span><span class="va">glove_twitter_25d</span>, <span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">glove_2d</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># 2-dimensional embeddings with 11925 rows</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      PC1   PC2  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> the  -3.51  0.93</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> of   -2.90  1.29</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> and  -3.35  1.15</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> to   -3.64  0.77</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> a    -3.77 -1.05</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> in   -3.16  0.37</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> for  -3.09  0.83</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> is   -3.52  0.99</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> on   -3.36  0.00</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> that -3.79  1.92</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">embeddings_list</span> <span class="op">&lt;-</span> <span class="fu"><a href="find_nearest.html">find_nearest</a></span><span class="op">(</span><span class="va">glove_twitter_25d</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"good"</span>, <span class="st">"bad"</span><span class="op">)</span>, each <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">embeddings_list_2d</span> <span class="op">&lt;-</span> <span class="fu">reduce_dimensionality</span><span class="op">(</span><span class="va">embeddings_list</span>, <span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">embeddings_list_2d</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $good</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># 2-dimensional embeddings with 10 rows</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        PC1   PC2  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> good   -0.33 -0.02</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> too     0.36  0.78</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> day    -1.15 -1.07</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> well    0.81  0.38</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> nice   -1.04  1.22</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> better  0.85  0.15</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> fun    -1.45  0.07</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> much    0.91  0.21</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> this    0.39 -1.26</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> hope    0.64 -0.46</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $bad</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># 2-dimensional embeddings with 10 rows</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       PC1   PC2  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> bad   -0.03 -0.28</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> shit  -1.01  0.06</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> crazy -0.70  0.23</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> but    1.40  0.31</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> hell  -0.95  0.32</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> right  0.43  0.94</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> like   0.13  0.22</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> same   0.71 -1.33</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> damn  -1.12 -0.50</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> thing  1.13  0.03</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tibble.tidyverse.org/" class="external-link">tibble</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">glove_tbl</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/as_tibble.html" class="external-link">as_tibble</a></span><span class="op">(</span><span class="va">glove_twitter_25d</span>, rownames <span class="op">=</span> <span class="st">"token"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">glove_tbl_2d</span> <span class="op">&lt;-</span> <span class="va">glove_tbl</span> <span class="op">|&gt;</span> <span class="fu">reduce_dimensionality</span><span class="op">(</span><span class="va">dim_1</span><span class="op">:</span><span class="va">dim_25</span>, <span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">glove_tbl_2d</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 11,925 × 3</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    token   PC1      PC2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  <span style="color: #BCBCBC;">*</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> the   -<span style="color: #BB0000;">3.51</span>  0.926  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> of    -<span style="color: #BB0000;">2.90</span>  1.29   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> and   -<span style="color: #BB0000;">3.35</span>  1.15   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> to    -<span style="color: #BB0000;">3.64</span>  0.773  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> a     -<span style="color: #BB0000;">3.77</span> -<span style="color: #BB0000;">1.05</span>   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> in    -<span style="color: #BB0000;">3.16</span>  0.370  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> for   -<span style="color: #BB0000;">3.09</span>  0.831  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> is    -<span style="color: #BB0000;">3.52</span>  0.987  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> on    -<span style="color: #BB0000;">3.36</span>  0.002<span style="text-decoration: underline;">38</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> that  -<span style="color: #BB0000;">3.79</span>  1.92   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 11,915 more rows</span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Louis Teitelbaum.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

